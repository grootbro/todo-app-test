# QA Стратегия и процессы

**Обновлено:** 31.12.2025

## 1. Стратегия тестирования для команды (5 dev + 2 QA)

### Распределение ролей

При таком составе один QA фокусируется на автоматизации, второй — на ручном тестировании и процессах. Но оба должны уметь делать и то, и другое.

```
QA #1 (Senior/Lead):
├── Архитектура автотестов
├── Код-ревью тестов
├── Интеграция с CI/CD
└── Менторинг QA #2

QA #2 (Middle):
├── Написание автотестов
├── Ручное тестирование новых фич
├── Exploratory testing
└── Баг-репорты и документация
```

### Какие виды тестирования внедрять в первую очередь

**Фаза 1 (первые 2 недели):**
- Smoke-тесты (5-10 автотестов) — чтобы сразу ловить критичные регрессии
- Чек-листы для ручного тестирования — быстрый старт без overhead

**Фаза 2 (месяц 1-2):**
- E2E тесты на Playwright для happy path — расширяем покрытие
- API-тесты (если есть бэкенд) — ловим проблемы раньше, чем UI

**Фаза 3 (месяц 2-3):**
- Интеграционные тесты
- Контрактное тестирование (если микросервисы)
- Visual regression (если важен UI)

### Процесс работы

```
Feature Branch → Dev Review → QA Testing → Merge to Main → Deploy
                                  ↓
                    ┌─────────────┴─────────────┐
                    │                           │
              Автотесты (CI)              Ручное тестирование
              на каждый PR                (новые фичи, edge cases)
```

**Definition of Done включает:**
- Unit-тесты написаны разработчиком
- E2E тест добавлен или обновлён
- QA провёл ручное тестирование
- Нет открытых Major/Critical багов

---

## 2. CI/CD интеграция

### Пайплайн

```yaml
# .github/workflows/test.yml (упрощённо)

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  # На каждый коммит/PR — быстрые тесты
  smoke-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - uses: pnpm/action-setup@v2
      - run: pnpm install
      - run: pnpm exec playwright install --with-deps chromium
      - run: pnpm run test:smoke
    timeout-minutes: 10

  # На PR в main — полный регресс
  regression-tests:
    if: github.base_ref == 'main'
    runs-on: ubuntu-latest
    strategy:
      matrix:
        browser: [chromium, firefox, webkit]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - uses: pnpm/action-setup@v2
      - run: pnpm install
      - run: pnpm exec playwright install --with-deps ${{ matrix.browser }}
      - run: pnpm run test:all -- --project=${{ matrix.browser }}
      - uses: actions/upload-artifact@v4
        if: failure()
        with:
          name: playwright-report-${{ matrix.browser }}
          path: playwright-report/

  # Перед релизом — полный прогон + отчёт
  release-tests:
    if: startsWith(github.ref, 'refs/tags/v')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - uses: pnpm/action-setup@v2
      - run: pnpm install
      - run: pnpm exec playwright install --with-deps
      - run: pnpm run test:all
      - run: pnpm run report:allure  # генерация отчёта
```

### Что когда запускать

| Триггер | Тесты | Время | Браузеры |
|---------|-------|-------|----------|
| Push в feature branch | Smoke (5-10 тестов) | ~2 мин | Chromium |
| PR в develop | Smoke + критичные E2E | ~5 мин | Chromium |
| PR в main | Полный регресс | ~15 мин | Chrome, Firefox, Safari |
| Релизный тег | Всё + отчёт | ~20 мин | Все + мобильные вьюпорты |
| Nightly (по расписанию) | Полный регресс + flaky detection | ~30 мин | Все |

### Обработка падений

- Flaky тесты помечаются и уходят в карантин
- Критичные падения блокируют merge
- Отчёт автоматически постится в Slack/Teams
- Скриншоты и трейсы сохраняются как артефакты

---

## 3. Метрики качества

### Метрики продукта

| Метрика | Цель | Как считать |
|---------|------|-------------|
| **Escaped Defects** | < 2 критичных в квартал | Баги, найденные на проде после релиза |
| **Defect Density** | Тренд вниз | Баги / KLOC или баги / story point |
| **MTTR** (Mean Time To Repair) | < 4 часов для Critical | Время от обнаружения до фикса |
| **Release Quality** | > 95% | % релизов без critical rollback |

### Метрики QA-команды

| Метрика | Цель | Зачем |
|---------|------|-------|
| **Test Coverage** | > 80% E2E для критичных путей | Понимать риски |
| **Automation Rate** | > 70% регрессионных тестов | Скорость релизов |
| **Test Execution Time** | Smoke < 5 мин, Full < 20 мин | Быстрая обратная связь |
| **Flaky Test Rate** | < 5% | Доверие к автотестам |
| **Bug Detection Rate** | 70%+ багов до прода | Эффективность QA |

### Метрики процесса

| Метрика | Что показывает |
|---------|----------------|
| **Cycle Time** | Скорость доставки фичи |
| **Bug Reopen Rate** | Качество фиксов |
| **Test Case Effectiveness** | Сколько багов находят тесты vs exploratory |

### Как отслеживать

- Дашборд в Grafana/Metabase
- Еженедельный отчёт в Slack
- Ретро раз в 2 недели — обсуждаем тренды

---

## 4. Развитие команды

### Онбординг нового QA (план на 2 недели)

**День 1-2: Погружение**
- Знакомство с продуктом (как пользователь)
- Доступы: репозиторий, Jira, тестовые окружения
- Обзор архитектуры с разработчиком
- Чтение документации: тест-план, гайдлайны

**День 3-5: Практика с поддержкой**
- Прохождение существующих тест-кейсов руками
- Запуск автотестов локально, разбор структуры
- Первый баг-репорт (с ревью от ментора)
- Парное тестирование с опытным QA

**Неделя 2: Самостоятельная работа**
- Тестирование небольшой фичи самостоятельно
- Написание 2-3 автотестов (с код-ревью)
- Участие в планировании спринта
- 1-on-1 с лидом: обратная связь, вопросы

**Критерии успешного онбординга:**
- [ ] Может самостоятельно протестировать фичу
- [ ] Написал и запушил автотест
- [ ] Понимает процесс релиза
- [ ] Знает, к кому обратиться по каким вопросам

### Ключевые навыки QA в 2024-2025

**Hard skills (must have):**
- Автоматизация: Playwright/Cypress — стандарт индустрии
- Программирование: TypeScript/JavaScript или Python
- API тестирование: Postman, REST/GraphQL
- Git: ветвление, merge, код-ревью
- CI/CD: понимание пайплайнов, GitHub Actions/GitLab CI
- SQL: базовые запросы для проверки данных

**Hard skills (nice to have):**
- Контейнеры: Docker для тестовых окружений
- Performance: k6, Artillery
- Mobile: Appium или Detox
- AI/ML тестирование: понимание специфики

**Soft skills:**
- Коммуникация с разработчиками (без конфликтов)
- Критическое мышление и внимание к деталям
- Умение приоритизировать (не всё нужно тестировать)
- Ownership: доводить баги до фикса, а не просто репортить

### План развития

```
Junior → Middle (1-2 года):
├── Освоить автоматизацию
├── Научиться писать читаемые баг-репорты
└── Понять бизнес-контекст продукта

Middle → Senior (2-3 года):
├── Архитектура тестовых фреймворков
├── Менторинг джунов
├── Участие в найме
└── Влияние на процессы

Senior → Lead (3+ года):
├── Стратегия тестирования
├── Метрики и отчётность
├── Кросс-командное взаимодействие
└── Техническое лидерство
```

---

## Заключение

Эффективный QA в современной команде — это не гейткипер, а enabler. Цель не в том, чтобы найти все баги, а в том, чтобы помочь команде выпускать качественный продукт быстро. Автоматизация, хорошие процессы и постоянное обучение — ключи к этому.
