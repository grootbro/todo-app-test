# Баг-репорты: Angular Todo App

## Шаблон баг-репорта

```
## [BUG-XXX] Краткое описание

**Severity:** Critical / Major / Minor / Trivial
**Priority:** P0 / P1 / P2 / P3
**Environment:** Browser, OS, URL
**Reported:** Дата
**Status:** Open / In Progress / Fixed / Closed

### Описание
Что происходит.

### Шаги воспроизведения
1. Шаг 1
2. Шаг 2
3. ...

### Ожидаемый результат
Что должно происходить.

### Фактический результат
Что происходит на самом деле.

### Скриншот / Видео
[Приложить]

### Дополнительно
Логи, консоль браузера, частота воспроизведения.
```

### Severity vs Priority

| Severity | Описание | Пример |
|----------|----------|--------|
| **Critical** | Приложение не работает, потеря данных | Не загружается список задач |
| **Major** | Основной функционал сломан, есть workaround | Нельзя удалить задачу, но можно отметить completed |
| **Minor** | Неудобство, не влияет на основной flow | Кнопка чуть съехала |
| **Trivial** | Косметика, опечатки | Лишний пробел в тексте |

| Priority | Когда фиксить |
|----------|---------------|
| **P0** | Немедленно, блокер релиза |
| **P1** | В текущем спринте |
| **P2** | В следующем спринте |
| **P3** | Когда будет время |

---

## Найденные баги

### BUG-001: Задача создаётся с пустым названием

**Severity:** Major  
**Priority:** P1  
**Environment:** Chrome 120, macOS, https://eliasfeijo.github.io/angular-todo-app/  
**Reported:** декабрь 2025  
**Status:** ✅ **FIXED** (проверено 31.12.2025)

#### Описание
При отправке формы с пустым полем ввода создаётся задача без текста.

#### Шаги воспроизведения
1. Открыть приложение
2. Оставить поле ввода пустым
3. Нажать Enter или кнопку добавления

#### Ожидаемый результат
Задача не создаётся, показывается валидационное сообщение или кнопка неактивна.

#### Фактический результат
Создаётся пустая задача, которая отображается как пустая строка в списке.

#### Дополнительно
Воспроизводится в 100% случаев. API JSONPlaceholder принимает пустые строки — валидация должна быть на фронте.

#### Проверка (31.12.2025)
✅ **ИСПРАВЛЕН**: Пустая задача больше не создается. Валидация добавлена на фронтенде.

---

### BUG-002: Нет индикатора загрузки при старте

**Severity:** Minor  
**Priority:** P2  
**Environment:** Chrome 120, медленное соединение (Slow 3G)  
**Reported:** декабрь 2025  
**Status:** Open

#### Описание
При загрузке приложения на медленном соединении пользователь видит пустой список без индикации загрузки.

#### Шаги воспроизведения
1. Открыть DevTools → Network → Slow 3G
2. Обновить страницу
3. Наблюдать за интерфейсом

#### Ожидаемый результат
Отображается спиннер или skeleton loader пока данные грузятся.

#### Фактический результат
Пустой список, пользователь не понимает — грузится или сломалось.

---

### BUG-003: Двойной клик создаёт две задачи

**Severity:** Major  
**Priority:** P1  
**Environment:** Chrome 120, macOS  
**Reported:** декабрь 2025  
**Status:** ✅ **FIXED** (проверено 31.12.2025)

#### Описание
Быстрый двойной клик по кнопке добавления создаёт две одинаковые задачи.

#### Шаги воспроизведения
1. Ввести текст "Тест"
2. Быстро дважды кликнуть на кнопку добавления

#### Ожидаемый результат
Создаётся одна задача, кнопка блокируется на время запроса.

#### Фактический результат
Создаются две задачи с одинаковым текстом.

#### Дополнительно
Race condition. Нужен debounce или блокировка кнопки.

#### Проверка (31.12.2025)
✅ **ИСПРАВЛЕН**: Двойной клик больше не создает дубликаты. Добавлена защита от race condition.

---

### BUG-004: Длинный текст задачи ломает вёрстку

**Severity:** Minor  
**Priority:** P2  
**Environment:** Chrome 120, десктоп 1920x1080  
**Reported:** декабрь 2025  
**Status:** ✅ **FIXED** (проверено 31.12.2025)

#### Описание
Задача с очень длинным текстом без пробелов выходит за границы контейнера.

#### Шаги воспроизведения
1. Создать задачу с текстом из 200+ символов без пробелов: `aaaaaa...`
2. Посмотреть на отображение

#### Ожидаемый результат
Текст переносится или обрезается с многоточием.

#### Фактический результат
Текст выходит за границы, появляется горизонтальный скролл.

#### Скриншот
[TODO: добавить]

#### Проверка (31.12.2025)
✅ **ИСПРАВЛЕН**: Длинный текст корректно обрабатывается, верстка не ломается. Добавлен CSS для переноса/обрезания текста.

---

### BUG-005: Нет обработки ошибки API

**Severity:** Major  
**Priority:** P1  
**Environment:** Chrome 120, offline mode  
**Reported:** декабрь 2025  
**Status:** Open

#### Описание
При недоступности API приложение не показывает сообщение об ошибке.

#### Шаги воспроизведения
1. Открыть DevTools → Network → Offline
2. Обновить страницу

#### Ожидаемый результат
Сообщение "Не удалось загрузить задачи. Проверьте соединение."

#### Фактический результат
Пустой список без объяснений. В консоли ошибка `Failed to fetch`.

---

### BUG-006: Фильтр не сохраняется в URL

**Severity:** Trivial  
**Priority:** P3  
**Environment:** Все браузеры  
**Reported:** декабрь 2025  
**Status:** Open

#### Описание
При выборе фильтра (Active/Completed) состояние не сохраняется в URL.

#### Шаги воспроизведения
1. Выбрать фильтр "Completed"
2. Скопировать URL и открыть в новой вкладке

#### Ожидаемый результат
Фильтр сохраняется (например, `?filter=completed`), страница открывается с тем же фильтром.

#### Фактический результат
Открывается с фильтром "All" по умолчанию.

#### Дополнительно
UX улучшение, не критично.

#### Проверка (31.12.2025)
ℹ️ **НЕ ПРИМЕНИМО**: Фильтры не реализованы в текущей версии приложения. Баг не актуален до реализации функционала фильтрации.

---

### BUG-007: Критичные нарушения доступности (a11y) - отсутствует title и lang

**Severity:** Critical  
**Priority:** P0  
**Environment:** Все браузеры, https://eliasfeijo.github.io/angular-todo-app/  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
Приложение имеет критичные нарушения доступности WCAG 2.1 Level A:
- Отсутствует `<title>` элемент (serious)
- Отсутствует атрибут `lang` на элементе `<html>` (serious)

Это блокирует использование приложения screen reader'ами и нарушает базовые требования доступности.

#### Шаги воспроизведения
1. Открыть приложение
2. Проверить через DevTools или axe DevTools
3. Проверить через screen reader

#### Ожидаемый результат
- Элемент `<title>` присутствует и описывает страницу
- Элемент `<html>` имеет атрибут `lang` (например, `lang="en"` или `lang="ru"`)

#### Фактический результат
- `<title>` отсутствует или пустой
- Атрибут `lang` отсутствует на `<html>`

#### Дополнительно
Обнаружено автоматическими тестами accessibility (axe-core). Нарушает WCAG 2.1 Level A требования.

---

### BUG-008: Форма ввода не имеет label или aria-label

**Severity:** Critical  
**Priority:** P0  
**Environment:** Все браузеры, screen readers  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
Поле ввода для добавления задачи не имеет связанного `<label>` или атрибута `aria-label`. Это делает форму недоступной для пользователей screen reader'ов.

#### Шаги воспроизведения
1. Открыть приложение
2. Включить screen reader (NVDA, JAWS, VoiceOver)
3. Попытаться найти и использовать поле ввода

#### Ожидаемый результат
Screen reader объявляет назначение поля ввода (например, "Поле ввода: Добавить задачу").

#### Фактический результат
Screen reader не может определить назначение поля, объявляет только "текстовое поле" без контекста.

#### Дополнительно
Обнаружено автоматическими тестами accessibility. Нарушает WCAG 2.1 Level A, правило "label" и "aria-input-field-name".

---

### BUG-009: Чекбоксы недоступны для screen reader

**Severity:** Critical  
**Priority:** P0  
**Environment:** Все браузеры, screen readers  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
Чекбоксы для отметки задач как выполненных не имеют связанных `<label>` или атрибутов `aria-label`/`aria-labelledby`. Пользователи screen reader'ов не могут понять, какой задаче соответствует чекбокс.

#### Шаги воспроизведения
1. Открыть приложение
2. Включить screen reader
3. Попытаться отметить задачу как выполненную

#### Ожидаемый результат
Screen reader объявляет: "Чекбокс: [текст задачи], не отмечен".

#### Фактический результат
Screen reader объявляет только "Чекбокс, не отмечен" без связи с текстом задачи.

#### Дополнительно
Обнаружено автоматическими тестами accessibility. Нарушает WCAG 2.1 Level A. Критично для пользователей с ограниченными возможностями.

---

### BUG-010: Нет сообщения об ошибке при сбое API при создании задачи

**Severity:** Major  
**Priority:** P1  
**Environment:** Chrome 120, при сбое API  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
При ошибке API (например, 500) при создании задачи приложение не показывает сообщение об ошибке пользователю. Задача просто не создается, но пользователь не понимает почему.

#### Шаги воспроизведения
1. Открыть DevTools → Network
2. Установить throttling на "Offline" или мокировать ошибку 500 для POST запросов
3. Попытаться создать задачу
4. Наблюдать за интерфейсом

#### Ожидаемый результат
Отображается сообщение об ошибке: "Не удалось создать задачу. Попробуйте позже."

#### Фактический результат
Задача не создается, но никакого сообщения не показывается. Пользователь не понимает, что произошло.

#### Дополнительно
Обнаружено автоматическими тестами. Связано с BUG-005 (нет обработки ошибки API при загрузке).

---

### BUG-011: Оптимистичное удаление без rollback при ошибке

**Severity:** Major  
**Priority:** P1  
**Environment:** Chrome 120, при сбое API  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
При удалении задачи используется оптимистичное обновление UI (задача сразу исчезает), но при ошибке DELETE API задача не восстанавливается в списке. Это может привести к потере данных с точки зрения пользователя.

#### Шаги воспроизведения
1. Открыть DevTools → Network
2. Мокировать ошибку 500 для DELETE запросов
3. Удалить задачу
4. Наблюдать за интерфейсом

#### Ожидаемый результат
Либо:
- Задача восстанавливается в списке с сообщением об ошибке
- Или задача не удаляется из UI до подтверждения успешного DELETE

#### Фактический результат
Задача исчезает из UI, но на сервере остается. При обновлении страницы задача снова появляется.

#### Дополнительно
Это может быть дизайн-решение, но с точки зрения пользователя это баг - данные "теряются" без объяснения.

---

### BUG-012: Нет сообщения о пустом списке задач

**Severity:** Minor  
**Priority:** P3  
**Environment:** Все браузеры  
**Reported:** 31.12.2025  
**Status:** Open

#### Описание
Когда список задач пуст (например, после фильтрации или если API вернул пустой массив), приложение не показывает сообщение типа "Нет задач" или "Список пуст".

#### Шаги воспроизведения
1. Мокировать API, чтобы вернуть пустой массив `[]`
2. Обновить страницу
3. Наблюдать за интерфейсом

#### Ожидаемый результат
Отображается сообщение: "Нет задач" или "Список пуст. Добавьте первую задачу."

#### Фактический результат
Просто пустой список без объяснений. Пользователь не понимает - это нормальное состояние или ошибка.

#### Дополнительно
UX улучшение, не критично, но улучшает пользовательский опыт.

---

## Статистика

| Severity | Количество | Открыто | Исправлено |
|----------|------------|---------|------------|
| Critical | 3 | 3 | 0 |
| Major | 5 | 3 | 2 |
| Minor | 3 | 2 | 1 |
| Trivial | 1 | 0 | 0 |
| **Всего** | **12** | **8** | **3** |

| Priority | Количество | Открыто |
|----------|------------|---------|
| P0 | 3 | 3 |
| P1 | 4 | 2 |
| P2 | 2 | 1 |
| P3 | 2 | 1 |

### Критические баги (P0) - 3

- **BUG-007**: Критичные нарушения доступности - отсутствует title и lang (Critical, P0)
- **BUG-008**: Форма ввода не имеет label или aria-label (Critical, P0)
- **BUG-009**: Чекбоксы недоступны для screen reader (Critical, P0)

### Актуальные баги (8)

**Critical (3):**
- **BUG-007**: Критичные нарушения доступности - отсутствует title и lang
- **BUG-008**: Форма ввода не имеет label или aria-label
- **BUG-009**: Чекбоксы недоступны для screen reader

**Major (3):**
- **BUG-002**: Нет индикатора загрузки при старте (Minor, P2)
- **BUG-005**: Нет обработки ошибки API
- **BUG-010**: Нет сообщения об ошибке при сбое API при создании задачи
- **BUG-011**: Оптимистичное удаление без rollback при ошибке

**Minor (2):**
- **BUG-002**: Нет индикатора загрузки при старте
- **BUG-012**: Нет сообщения о пустом списке задач

### Исправленные баги (3)

- ✅ **BUG-001**: Задача создаётся с пустым названием
- ✅ **BUG-003**: Двойной клик создаёт две задачи  
- ✅ **BUG-004**: Длинный текст задачи ломает вёрстку

### Не применимо (1)

- ℹ️ **BUG-006**: Фильтр не сохраняется в URL (фильтры не реализованы в приложении)

---

## TODO после exploratory testing

- [x] Проверить accessibility (tab navigation, screen reader) - **Выполнено, найдены критические баги (BUG-007, BUG-008, BUG-009)**
- [ ] Проверить XSS при вводе `<script>` в название
- [ ] Проверить поведение при очень быстрых действиях (race conditions)
- [ ] Проверить мобильный вид
- [ ] Проверить кроссбраузерность (Firefox, Safari)
